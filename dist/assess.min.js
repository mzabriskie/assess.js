!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.assess=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b,c,d,e){this.assertions=a,this.callback=b,this.interim=c,this.success=d,this.failure=e}c.prototype.testAll=function(){for(var a=!0,b=0,c=this.assertions.length;c>b;b++)if(!this.test(b)){a=!1;break}return a},c.prototype.test=function(a){var b=this.assertions[a],c=null,d=!1;try{if(this.interim.call(null,b.i),c=this.callback.call(null,b.i),c!==b.o)throw new Error;this.success.call(null,a,c),d=!0}catch(e){this.failure.call(null,a,b.o,c)}return d},b.exports=c},{}],2:[function(_dereq_,module,exports){module.exports=function(){"use strict";function renderContent(a,b){if("undefined"==typeof templates[a]){var c=document.getElementById(a).innerHTML;templates[a]=Handlebars.compile(c)}container.innerHTML=templates[a](b)}var Router=_dereq_("./router"),Timer=_dereq_("./timer"),Assert=_dereq_("./assert"),templates={},container=document.getElementById("container");Handlebars.registerHelper("math",function(a,b,c,d){return arguments.length<4&&(d=c,c=b,b="+"),a=parseFloat(a),c=parseFloat(c),{"+":a+c,"-":a-c,"*":a*c,"/":a/c,"%":a%c}[b]});var lapsed=0,timer=null,assess={init:function(questions){var router=(new Router).when("/",function(){renderContent("home-template"),document.getElementById("start").onclick=function(){this.redirect("/q/1")}.bind(this)}).when("/content",function(){renderContent("content-template",{questions:questions})}).when("/results",function(){renderContent("results-template",{questions:questions})}).when("/q/:ID",{controller:function(ID){var index=parseInt(ID,10)-1,hash=null;if(0>index?hash="/q/1":index>=questions.length&&(hash="/q/"+questions.length),null!==hash)return this.redirect(hash),void 0;renderContent("question-template",questions[index]);var callback=null,code,assert;code=CodeMirror.fromTextArea(document.getElementById("code"),{lineNumbers:!0,matchBrackets:!0}),timer=new Timer("timer").start(),assert=new Assert(questions[index].test,function(){return callback.apply(null,arguments)},function(){assess.log('Testing input "'+arguments[0]+'"...')},function(){assess.log(arguments[1]+" is correct.","pass")},function(){assess.log("Expected "+arguments[1]+" but got "+arguments[2],"fail")}),document.getElementById("submit").onclick=function(){timer.stop(),eval("callback = "+code.getValue()),assert.testAll()?(assess.log("Nice work! Click Done! to continue to the next question.","info"),document.getElementById("submit").onclick=function(){var a="";a=index+1<questions.length?"/q/"+(index+2):"/results",router.redirect(a)}):timer.start()}},beforeunload:function(){lapsed+=timer.lapsed,document.getElementById("submit").onclick=null}}).otherwise(function(){renderContent("404-template")}).process();return this},log:function(a,b){var c=document.createElement("div"),d=document.getElementById("console");return d.appendChild(c),c.innerHTML=a,"undefined"!=typeof b&&(c.className=b),d.scrollTop=d.scrollHeight,this}};return assess}},{"./assert":1,"./router":3,"./timer":4}],3:[function(a,b){function c(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!0):a["on"+b]=c}function d(a){return a?String(a).replace(/\s+/g,""):""}function e(a){return a=d(a),0!==a.indexOf("/")&&(a="/"+a),a}function f(){this.routes={},this.fallback=null,c(window,"hashchange",function(){this.process(this.hash())}.bind(this))}"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(a){var b=this;return function(){b.apply(a,arguments)}}),f.prototype.hash=function(){return window.location.hash.replace(/^#\/?/,"")},f.prototype.redirect=function(a){return window.location.hash=e(a),this},f.prototype.when=function(a,b){a=e(a);var c=a.replace(/\/(:[^\/]*)/g,"/([^/]*)"),d="object"==typeof b?b:{controller:b};return d.pattern=a===c?null:new RegExp("^"+c+"$"),this.routes[a]=d,this},f.prototype.otherwise=function(a){return this.current=null,this.fallback=a,this},f.prototype.process=function(a){if("undefined"==typeof a&&(a=this.hash()),a=e(a),null!==this.current&&this.current.hash===a)return this;var b=this.routes[""],c=null;if(a.length>0)if("undefined"!=typeof this.routes[a])b=this.routes[a];else for(var d in this.routes)if(this.routes.hasOwnProperty(d)&&null!==this.routes[d].pattern){var f=a.match(this.routes[d].pattern);if(f){c=f.splice(1,f.length-1),b=this.routes[d];break}}if(null!==this.current&&"function"==typeof this.current.route.beforeunload){var g={stopped:!1,stop:function(){this.stopped=!0}};if(this.current.route.beforeunload.call(this,g),g.stopped)return window.history.back(),this}return this.current=null,"undefined"!=typeof b&&"function"==typeof b.controller?(b.controller.apply(this,c),this.current={hash:a,route:b}):"function"==typeof this.fallback&&this.fallback.call(this,a),this},b.exports=f},{}],4:[function(a,b){function c(a){var b={m:6e4,s:1e3},c="";for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=Math.floor(a/e);a%=e,c.length>0&&(c+=":"),10>f&&(f="0"+f),c+=f}return c}function d(a){this.element="string"==typeof a?document.getElementById(a):a,this.interval=null,this.lapsed=0}d.prototype.start=function(){var a=this;return this.interval=setInterval(function(){a.lapsed+=1e3,a.element.innerHTML=c(a.lapsed)},1e3),this},d.prototype.stop=function(){return this.interval&&(clearInterval(this.interval),this.interval=null),this},b.exports=d},{}]},{},[2])(2)});